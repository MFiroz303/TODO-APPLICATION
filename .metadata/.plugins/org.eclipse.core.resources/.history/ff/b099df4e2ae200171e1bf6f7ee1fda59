var todoApp = angular.module("todoApp");
todoApp.controller('homeController',
		function($scope, $state, homeService, $mdSidenav, $mdDialog, $http, $location) {
	
			console.log('hello');
			$scope.mouse = false;
			$scope.firozcollab = {};
			
			/** *******toggle of sidebar ************* */
			$scope.showNav=true;
			$scope.hideNav=function(){
				console.log("########inside sidebar#######");
				$scope.showNav=!$scope.showNav;
			}
			/** *******search Notes ************* */

			 $scope.search=function(searchText){
				var arr=[];
				j=-1;
		     	console.log('serchinggg......'+search);
				for(var i=0;i<search.length;i++)
					{
						if(searchText==search[i].title){
							j++;
							arr[j]=search[i];
						}
					}
				console.log(arr);
				return arr;
			 }
			 
		      $scope.searchTextChange = function(searchText) {
		          var arr = [];
		          var j = -1;
		          for(var i=0; i<search.length; i++) {
		            if(search[i].title == searchText)  {
		              ++j;
		              arr[j] = search[i];
		            }
		          }
		          $scope.searchResultNotes = arr;
		        }
		      
		    //List and Grid view
				 $scope.view=function(){
						var view = localStorage.getItem('view');
						if(view=='list'){
							$scope.displayView('list');
						}else{
							$scope.displayView('grid');
						}
					}
			
					$scope.displayView=function(type){
						
						if(type=='list'){
							$scope.view='70';
						    $scope.width='100%';
							$scope.list=false
							$scope.grid=true
							localStorage.setItem('view','list');
						}else{
							$scope.view='33';
							$scope.width='260px';
							$scope.grid=false;
							$scope.list=true;
							localStorage.setItem('view','grid');
						}
							
					}
					/** *******logout************* */
					$scope.logout = function() {
						localStorage.removeItem("token");
						$state.go('login');
					}
					
		      
		      /** *******profile image ************* */
				var profilePic = function() {
					var url = 'userProfile';
					var getUser = homeService.service(url, 'GET');
					getUser.then(function(response) {
						var User = response.data;
						$scope.getUser = User;
						console.log($scope.getUser)

					}, function(response) {

					});
				}
				profilePic();
				getNotes();
				
				//getUser();
			});