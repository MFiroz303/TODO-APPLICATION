package com.bridgeit.todo.service;

import java.util.HashMap;
import java.util.Map;

import javax.mail.Message;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.util.SerializationUtils;

public class ConsumerImpl implements Consumer{
	
	 
	@Autowired
	Mailer mailer;


	public void onMessage(Message messsage) {
		
		byte body[]=messsage.getBody();
		Map map = (HashMap)SerializationUtils.deserialize(body);
		mailer.send(map.get("to")+"", map.get("message")+"");
	}

}

}
